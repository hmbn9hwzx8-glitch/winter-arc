<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Winter Arc</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#111">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<style>
html, body {
  overscroll-behavior: none;
  touch-action: manipulation;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
  -webkit-text-size-adjust: 100%;
}

* {
  touch-action: manipulation;
}

body{font-family:-apple-system,system-ui;background:#111;color:#eee;padding:16px}
h1,h2{margin-top:0}
button{width:100%;padding:12px;margin:6px 0;font-size:16px;border:none;border-radius:6px}
.yes{background:#1e7f4f;color:#fff}
.no{background:#7f1e1e;color:#fff}
.card{border:1px solid #333;padding:12px;border-radius:8px;margin-top:14px}

.active{
  outline:2px solid #fff;
  filter:brightness(1.3);
}
</style>
</head>
<body>

<h1>Winter Arc</h1>

<div class="card">
<h2>Günlük Check-in</h2>

<div class="task-card" data-task="job">
  <div class="task-text">Ana işi yaptın mı?</div>
  <button class="check-btn" onclick="toggleTask('job')">✓</button>
</div>



<div class="task-card" data-task="escape">
  <div class="task-text">Bilerek kaçtın mı?</div>
  <button class="check-btn" onclick="toggleTask('escape')">✓</button>
</div>



<div class="task-card" data-task="phone">
  <div class="task-text">Telefon kaçağı (&gt;1s)?</div>
  <button class="check-btn" onclick="toggleTask('phone')">✓</button>
</div>


<div class="task-card" data-task="lie">
  <div class="task-text">Kendine yalan söyledin mi?</div>
  <button class="check-btn" onclick="toggleTask('lie')">✓</button>
</div>



</div>

<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}
</script>
<script>
let lastTouchEnd = 0;
document.addEventListener('touchend', function (event) {
  const now = Date.now();
  if (now - lastTouchEnd <= 300) {
    event.preventDefault();
  }
  lastTouchEnd = now;
}, false);
</script>

  <script>
const state = {};

function setVal(task, value){
  state[task] = value;

  const container = document.querySelector(`[data-task="${task}"]`);
  const buttons = container.querySelectorAll("button");

  buttons.forEach(btn => btn.classList.remove("active"));

  if(value === 1){
    buttons[0].classList.add("active"); // yes
  } else {
    buttons[1].classList.add("active"); // no
  }

  localStorage.setItem("dailyState", JSON.stringify(state));
}

// Sayfa açılınca eski veriyi yükle
window.onload = () => {
  const saved = localStorage.getItem("dailyState");
  if(saved){
    Object.assign(state, JSON.parse(saved));
    for(const key in state){
      setVal(key, state[key]);
    }
  }
};
</script>

</body>
</html>





